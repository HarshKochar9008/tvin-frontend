{"ast":null,"code":"import React,{useRef}from\"react\";import{BlockMath}from\"react-katex\";import\"katex/dist/katex.min.css\";import Toolbar from\"./Toolbar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LatexEditor(_ref){let{value,setValue}=_ref;const textareaRef=useRef();// onInsert now supports (latex, isFormatting)\nconst handleInsert=function(latex){let isFormatting=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const textarea=textareaRef.current;const start=textarea.selectionStart;const end=textarea.selectionEnd;if(isFormatting){// For formatting, wrap selected text or place cursor inside braces\nconst selected=value.substring(start,end);let insertText,cursorPos;if(selected){// e.g. \\textbf{selected}\ninsertText=latex.replace('{}',`{${selected}}`);cursorPos=start+insertText.length;}else{// e.g. \\textbf{|}\ninsertText=latex;cursorPos=start+latex.indexOf('{}')+1;}const newValue=value.substring(0,start)+insertText+value.substring(end);setValue(newValue);setTimeout(()=>{textarea.focus();textarea.selectionStart=textarea.selectionEnd=cursorPos;},0);}else{// Normal insert (symbols, files, links)\nconst newValue=value.substring(0,start)+latex+value.substring(end);setValue(newValue);setTimeout(()=>{textarea.focus();textarea.selectionStart=textarea.selectionEnd=start+latex.length;},0);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-1/3 w-96 h-48 bg-blue-700 opacity-10 rounded-full filter blur-2xl animate-pulse -z-10\",style:{animationDuration:'8s'}}),/*#__PURE__*/_jsx(Toolbar,{onInsert:handleInsert}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-6 w-full h-full mt-4\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:textareaRef,className:\"border border-gray-700 bg-gray-900 text-gray-100 p-4 w-full md:w-1/2 h-[450px] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-500 resize-none shadow-inner text-lg font-mono transition-all\",value:value,onChange:e=>setValue(e.target.value),placeholder:\"Type LaTeX here...\",\"aria-label\":\"LaTeX input area\",tabIndex:0}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-700 bg-gray-800 text-white p-4 w-full md:w-1/2 h-[450px] rounded-lg overflow-auto shadow-inner flex items-center text-lg font-mono transition-all\",children:/*#__PURE__*/_jsx(BlockMath,{math:value,errorColor:\"#cc0000\",renderError:err=>/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-400 font-semibold\",children:[err.name,\": \",err.message]})})})]})]});}","map":{"version":3,"names":["React","useRef","BlockMath","Toolbar","jsx","_jsx","jsxs","_jsxs","LatexEditor","_ref","value","setValue","textareaRef","handleInsert","latex","isFormatting","arguments","length","undefined","textarea","current","start","selectionStart","end","selectionEnd","selected","substring","insertText","cursorPos","replace","indexOf","newValue","setTimeout","focus","className","children","style","animationDuration","onInsert","ref","onChange","e","target","placeholder","tabIndex","math","errorColor","renderError","err","name","message"],"sources":["H:/Asky/frontend/src/components/LatexEditor.jsx"],"sourcesContent":["import React, { useRef } from \"react\";\r\nimport { BlockMath } from \"react-katex\";\r\nimport \"katex/dist/katex.min.css\";\r\nimport Toolbar from \"./Toolbar\";\r\n\r\nexport default function LatexEditor({ value, setValue }) {\r\n  const textareaRef = useRef();\r\n  // onInsert now supports (latex, isFormatting)\r\n  const handleInsert = (latex, isFormatting = false) => {\r\n    const textarea = textareaRef.current;\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    if (isFormatting) {\r\n      // For formatting, wrap selected text or place cursor inside braces\r\n      const selected = value.substring(start, end);\r\n      let insertText, cursorPos;\r\n      if (selected) {\r\n        // e.g. \\textbf{selected}\r\n        insertText = latex.replace('{}', `{${selected}}`);\r\n        cursorPos = start + insertText.length;\r\n      } else {\r\n        // e.g. \\textbf{|}\r\n        insertText = latex;\r\n        cursorPos = start + latex.indexOf('{}') + 1;\r\n      }\r\n      const newValue = value.substring(0, start) + insertText + value.substring(end);\r\n      setValue(newValue);\r\n      setTimeout(() => {\r\n        textarea.focus();\r\n        textarea.selectionStart = textarea.selectionEnd = cursorPos;\r\n      }, 0);\r\n    } else {\r\n      // Normal insert (symbols, files, links)\r\n      const newValue = value.substring(0, start) + latex + value.substring(end);\r\n      setValue(newValue);\r\n      setTimeout(() => {\r\n        textarea.focus();\r\n        textarea.selectionStart = textarea.selectionEnd = start + latex.length;\r\n      }, 0);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"relative w-full\">\r\n      <div className=\"absolute top-0 left-1/3 w-96 h-48 bg-blue-700 opacity-10 rounded-full filter blur-2xl animate-pulse -z-10\" style={{animationDuration: '8s'}}></div>\r\n      <Toolbar onInsert={handleInsert} />\r\n      <div className=\"flex flex-col md:flex-row gap-6 w-full h-full mt-4\">\r\n        <textarea\r\n          ref={textareaRef}\r\n          className=\"border border-gray-700 bg-gray-900 text-gray-100 p-4 w-full md:w-1/2 h-[450px] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-500 resize-none shadow-inner text-lg font-mono transition-all\"\r\n          value={value}\r\n          onChange={e => setValue(e.target.value)}\r\n          placeholder=\"Type LaTeX here...\"\r\n          aria-label=\"LaTeX input area\"\r\n          tabIndex={0}\r\n        />\r\n        <div className=\"border border-gray-700 bg-gray-800 text-white p-4 w-full md:w-1/2 h-[450px] rounded-lg overflow-auto shadow-inner flex items-center text-lg font-mono transition-all\">\r\n          {/* Error handling for LaTeX rendering */}\r\n          <BlockMath math={value} errorColor=\"#cc0000\" renderError={err => <span className=\"text-red-400 font-semibold\">{err.name}: {err.message}</span>} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}