{"ast":null,"code":"var _jsxFileName = \"H:\\\\Asky\\\\frontend\\\\src\\\\components\\\\LatexEditor.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef } from \"react\";\nimport { BlockMath } from \"react-katex\";\nimport \"katex/dist/katex.min.css\";\nimport Toolbar from \"./Toolbar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LatexEditor({\n  value,\n  setValue\n}) {\n  _s();\n  const textareaRef = useRef();\n  // onInsert now supports (latex, isFormatting)\n  const handleInsert = (latex, isFormatting = false) => {\n    const textarea = textareaRef.current;\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    if (isFormatting) {\n      // For formatting, wrap selected text or place cursor inside braces\n      const selected = value.substring(start, end);\n      let insertText, cursorPos;\n      if (selected) {\n        // e.g. \\textbf{selected}\n        insertText = latex.replace('{}', `{${selected}}`);\n        cursorPos = start + insertText.length;\n      } else {\n        // e.g. \\textbf{|}\n        insertText = latex;\n        cursorPos = start + latex.indexOf('{}') + 1;\n      }\n      const newValue = value.substring(0, start) + insertText + value.substring(end);\n      setValue(newValue);\n      setTimeout(() => {\n        textarea.focus();\n        textarea.selectionStart = textarea.selectionEnd = cursorPos;\n      }, 0);\n    } else {\n      // Normal insert (symbols, files, links)\n      const newValue = value.substring(0, start) + latex + value.substring(end);\n      setValue(newValue);\n      setTimeout(() => {\n        textarea.focus();\n        textarea.selectionStart = textarea.selectionEnd = start + latex.length;\n      }, 0);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-0 left-1/3 w-96 h-48 bg-blue-700 opacity-10 rounded-full filter blur-2xl animate-pulse -z-10\",\n      style: {\n        animationDuration: '8s'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Toolbar, {\n      onInsert: handleInsert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col md:flex-row gap-6 w-full h-full mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textareaRef,\n        className: \"border border-gray-700 bg-gray-900 text-gray-100 p-4 w-full md:w-1/2 h-[450px] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-500 resize-none shadow-inner text-lg font-mono transition-all\",\n        value: value,\n        onChange: e => setValue(e.target.value),\n        placeholder: \"Type LaTeX here...\",\n        \"aria-label\": \"LaTeX input area\",\n        tabIndex: 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border border-gray-700 bg-gray-800 text-white p-4 w-full md:w-1/2 h-[450px] rounded-lg overflow-auto shadow-inner flex items-center text-lg font-mono transition-all\",\n        children: /*#__PURE__*/_jsxDEV(BlockMath, {\n          math: value,\n          errorColor: \"#cc0000\",\n          renderError: err => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-400 font-semibold\",\n            children: [err.name, \": \", err.message]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 76\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(LatexEditor, \"gJtT2aPnbUb4WH8ANBrFCKASbhs=\");\n_c = LatexEditor;\nvar _c;\n$RefreshReg$(_c, \"LatexEditor\");","map":{"version":3,"names":["React","useRef","BlockMath","Toolbar","jsxDEV","_jsxDEV","LatexEditor","value","setValue","_s","textareaRef","handleInsert","latex","isFormatting","textarea","current","start","selectionStart","end","selectionEnd","selected","substring","insertText","cursorPos","replace","length","indexOf","newValue","setTimeout","focus","className","children","style","animationDuration","fileName","_jsxFileName","lineNumber","columnNumber","onInsert","ref","onChange","e","target","placeholder","tabIndex","math","errorColor","renderError","err","name","message","_c","$RefreshReg$"],"sources":["H:/Asky/frontend/src/components/LatexEditor.jsx"],"sourcesContent":["import React, { useRef } from \"react\";\r\nimport { BlockMath } from \"react-katex\";\r\nimport \"katex/dist/katex.min.css\";\r\nimport Toolbar from \"./Toolbar\";\r\n\r\nexport default function LatexEditor({ value, setValue }) {\r\n  const textareaRef = useRef();\r\n  // onInsert now supports (latex, isFormatting)\r\n  const handleInsert = (latex, isFormatting = false) => {\r\n    const textarea = textareaRef.current;\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    if (isFormatting) {\r\n      // For formatting, wrap selected text or place cursor inside braces\r\n      const selected = value.substring(start, end);\r\n      let insertText, cursorPos;\r\n      if (selected) {\r\n        // e.g. \\textbf{selected}\r\n        insertText = latex.replace('{}', `{${selected}}`);\r\n        cursorPos = start + insertText.length;\r\n      } else {\r\n        // e.g. \\textbf{|}\r\n        insertText = latex;\r\n        cursorPos = start + latex.indexOf('{}') + 1;\r\n      }\r\n      const newValue = value.substring(0, start) + insertText + value.substring(end);\r\n      setValue(newValue);\r\n      setTimeout(() => {\r\n        textarea.focus();\r\n        textarea.selectionStart = textarea.selectionEnd = cursorPos;\r\n      }, 0);\r\n    } else {\r\n      // Normal insert (symbols, files, links)\r\n      const newValue = value.substring(0, start) + latex + value.substring(end);\r\n      setValue(newValue);\r\n      setTimeout(() => {\r\n        textarea.focus();\r\n        textarea.selectionStart = textarea.selectionEnd = start + latex.length;\r\n      }, 0);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"relative w-full\">\r\n      <div className=\"absolute top-0 left-1/3 w-96 h-48 bg-blue-700 opacity-10 rounded-full filter blur-2xl animate-pulse -z-10\" style={{animationDuration: '8s'}}></div>\r\n      <Toolbar onInsert={handleInsert} />\r\n      <div className=\"flex flex-col md:flex-row gap-6 w-full h-full mt-4\">\r\n        <textarea\r\n          ref={textareaRef}\r\n          className=\"border border-gray-700 bg-gray-900 text-gray-100 p-4 w-full md:w-1/2 h-[450px] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-500 resize-none shadow-inner text-lg font-mono transition-all\"\r\n          value={value}\r\n          onChange={e => setValue(e.target.value)}\r\n          placeholder=\"Type LaTeX here...\"\r\n          aria-label=\"LaTeX input area\"\r\n          tabIndex={0}\r\n        />\r\n        <div className=\"border border-gray-700 bg-gray-800 text-white p-4 w-full md:w-1/2 h-[450px] rounded-lg overflow-auto shadow-inner flex items-center text-lg font-mono transition-all\">\r\n          {/* Error handling for LaTeX rendering */}\r\n          <BlockMath math={value} errorColor=\"#cc0000\" renderError={err => <span className=\"text-red-400 font-semibold\">{err.name}: {err.message}</span>} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}